
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/stylesheet/style.min.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/stylesheet/ribbons.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/stylesheet/custom.css">

    <link href="https://pybit.es/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PyBites Atom">

    <link href="https://pybit.es/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="PyBites RSS">

    <link rel="shortcut icon" href="https://pybit.es/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://pybit.es/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Julian" />
<meta name="description" content="Learn to create a simple web scraper in Python using BeautifulSoup4" />
<meta name="keywords" content="python, tips, tricks, code, pybites, beautifulsoup, bs4, webscraping, namedtuples">
<meta property="og:site_name" content="PyBites"/>
<meta property="og:title" content="Create a Simple Web Scraper with BeautifulSoup4"/>
<meta property="og:description" content="Learn to create a simple web scraper in Python using BeautifulSoup4"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://pybit.es/simplewebscraper.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-01-11 13:00:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://pybit.es/author/julian.html">
<meta property="article:section" content="Tools"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="tips"/>
<meta property="article:tag" content="tricks"/>
<meta property="article:tag" content="code"/>
<meta property="article:tag" content="pybites"/>
<meta property="article:tag" content="beautifulsoup"/>
<meta property="article:tag" content="bs4"/>
<meta property="article:tag" content="webscraping"/>
<meta property="article:tag" content="namedtuples"/>
<meta property="og:image" content="https://pybit.es/images/featured/pb-article.png">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@pybites" />
<meta name="twitter:title" content="Create a Simple Web Scraper with BeautifulSoup4" />
<meta name="twitter:description" content="Learn to create a simple web scraper in Python using BeautifulSoup4" />
<meta name="twitter:image" content="https://pybit.es/images/featured/pb-article.png">

  <title>PyBites &ndash; Create a Simple Web Scraper with BeautifulSoup4</title>


</head>
<body>

  <!-- change ribbon color based on topic -->
  <div class="ribbon right
      blue
  ">
    <a href="https://codechalleng.es" target="_blank">Click here to code!</a>
  </div>

  <!-- change aside color based on topic -->
    <aside class='blue'>
  
    <div>
      <a href="https://pybit.es">
          <img src="https://pybit.es/theme/img/article.png" alt="PyBites" title="PyBites">
      </a>
      <h1><a href="https://pybit.es">PyBites</a></h1>

<p>Python Code Challenges, Articles and News - One Bite a Day</p>
      <nav>
        <ul class="list">
          <li><a href="https://pybit.es/pages/about.html">About</a></li>
          <li><a href="https://pybit.es/pages/articles.html">Articles</a></li>
          <li><a href="https://pybit.es/pages/challenges.html">Challenges</a></li>
          <li><a href="https://pybit.es/pages/courses.html">Courses</a></li>
          <li><a href="https://pybit.es/pages/news.html">News</a></li>
          <li><a href="https://pybit.es/pages/projects.html">Projects</a></li>
          <li><a href="https://pybit.es/pages/search.html">Search</a></li>

        </ul>
      </nav>


	      <a class="twitter-follow-button" href="https://twitter.com/pybites" data-show-screen-name="false" data-size="large" data-show-count="false">Follow @pybites</a>

		    <a class="github-button" href="https://github.com/pybites" data-size="large" aria-label="Follow @pybites on GitHub">Follow</a>

      <br>
      <script src="https://apis.google.com/js/platform.js"></script>
      <div class="g-ytsubscribe" data-channelid="UCBn-uKDGsRBfcB0lQeOB_gA" data-layout="default" data-count="default"></div>

	
    </div>


  </aside>
  <main>


<article class="single">
  <header>
    <h1 id="simplewebscraper">Create a Simple Web Scraper with BeautifulSoup4</h1>
    <p>
          Posted by <a href="https://pybit.es/author/julian.html">Julian</a> on Wed 11 January 2017 in <a href="https://pybit.es/category/tools.html">Tools</a>


        &#8226; 4 min read
    </p>
  </header>


  <div>
    <p>I absolutely loved the idea of web scraping when Bob explained what it was (it sounded so spy-like and hackery!). It did however sound like something that, coding-wise, was completely out of my grasp. Once I dove in and tried to create one though I realised it was actually quite simple!</p>
<h2>Concept</h2>
<p>Create a web scraper that probes a site for the latest headlines.</p>
<p>For my example, I'm going to scrape <a href="http://wowhead.com">wowhead.com</a>, a World of Warcraft database site, for their latest news headlines.</p>
<p>Head to the <em>Wowhead</em> page and you'll see their home page is just a series of news/blog posts. What we want to do is pull the title of each blog post and output it to text.</p>
<p>(You can follow along with this or, of course, you can use your own site).</p>
<h2>The Setup</h2>
<ul>
<li>Decide on the site to scrape.</li>
<li><a href="https://pybit.es/the-beauty-of-virtualenv.html">Create a venv</a> to run all of this up in. I created a directory called "wowhead" for this and created the venv in that:</li>
</ul>
<div class="highlight"><pre><span></span># pwd
wowhead
# ls
venv    wowhead_scraper.py
</pre></div>


<ul>
<li>pip install bs4 requests (Install the BeautifulSoup4 (bs4) and Requests modules)</li>
</ul>
<h2>The Code</h2>
<p>The final code for this simple scraper can be found in the <a href="https://github.com/pybites/blog_code">PyBites Code Repo</a>, subdirectory <a href="https://github.com/pybites/blog_code/tree/master/BeautifulSoup">BeautifulSoup</a>.</p>
<blockquote>
<p>Disclaimer: I've lumped everything under the main() function. This is a really simple program and I wanted to keep it as readable as possible, thus it's not all split into different functions.</p>
</blockquote>
<ul>
<li>After the initial code setup of importing modules and defining main, the first task is to grab a copy of the site's html file:</li>
</ul>
<div class="highlight"><pre><span></span>URL = &quot;http://www.wowhead.com&quot;
header_list = []

def main():
    raw_site_page = requests.get(URL)
    raw_site_page.raise_for_status()  #Confirm site was pulled. Error if not
</pre></div>


<p>The <em>get</em> function of the requests module allows us to pull the HTML data from the site. We assign this data to the variable <em>raw_site_page</em>. (This is known as the <strong>response</strong> object).</p>
<p>As the comment implies, the <em>.raise_for_status()</em> function checks to see if the data was pulled successfully. If, for example, your URL is incorrect, this will error your program out and tell you about it.</p>
<ul>
<li>Next, Beautiful Soup fun:</li>
</ul>
<div class="highlight"><pre><span></span>soup = bs4.BeautifulSoup(raw_site_page.text, &#39;html.parser&#39;)
</pre></div>


<p>This code takes the Response object and reads it as plain text. BS4 parses it with the html parser and creates a <strong>Soup Object</strong> which we're assigning to the variable <em>soup</em>.</p>
<ul>
<li>Now the tricky part:</li>
</ul>
<div class="highlight"><pre><span></span>html_header_list = soup.select(&#39;.heading-size-1&#39;)
    for headers in html_header_list:
        print(headers)
</pre></div>


<p>We need to use the <em>.select()</em> function within BS4 to find what we want in the site HTML code. This is where you'll need to view the page source of the site (<a href="http://testingfreak.com/inspect-element-in-firefox-chrome-or-ie-browsers/">or use Inspect</a>!) to find something unique about the data you want to pull.</p>
<p>You can see that I've specified the CSS Element ".heading-size-1". On the <em>Wowhead</em> page I found that each post heading contained this element and that it was unique to them as well.</p>
<p>We then take this selected data and create <em>html_header_list</em> with it.</p>
<ul>
<li>I've added a for loop to print the contents of the list. This is where I got caught the first time. Run the program and you'll see something similar to this (showing first line only):</li>
</ul>
<div class="highlight"><pre><span></span>$ python3 wowhead_scraper.py 
<span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">&quot;heading-size-1&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/patch-7-1-5-survival-guide&quot;</span><span class="nt">&gt;</span>Patch 7.1.5 Survival Guide: Class Guides, New Legendaries, Brawler&#39;s Guild, Artifact Knowledge Catch Up and More!<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
</pre></div>


<p>What's happening here is that I'm not only just getting the header of the post but also the URL assigned to by the "a href" HTML tag. We don't need this data for this exercise.</p>
<ul>
<li>We could use regex to strop the URLs out but BS4 makes it easier. We can grab just the plain text used within the CSS element using .getText():</li>
</ul>
<div class="highlight"><pre><span></span>html_header_list = soup.select(&#39;.heading-size-1&#39;)
    for headers in html_header_list:
        header_list.append(headers.getText())
</pre></div>


<p>Using .getText() we can then pull the plain text and append it to the <em>header_list</em> list.</p>
<ul>
<li>Now if we iterate over <em>header_list</em> we see just the data we want!</li>
</ul>
<div class="highlight"><pre><span></span>for headers in header_list:
        print(headers)
</pre></div>


<div class="highlight"><pre><span></span>$ python3 wowhead_scraper.py 
Patch 7.1.5 Survival Guide: Class Guides, New Legendaries, Brawler&#39;s Guild, Artifact Knowledge Catch Up and More!
Official Patch Notes for World of Warcraft 7.1.5
Kirin Tor Quest Fix, World Quest Reset in 7.1.5, Live Developer Q<span class="err">&amp;</span>A Thursday
The Story of Aviana - Lore Collaboration with Nobbel87
All The Demon Hunter Class and Legendary Changes in Patch 7.1.5
Wowhead Weekly #106 and Blizzard Gear Shop Diablo Sale
$ 
</pre></div>


<h2>More examples (Bob)</h2>
<p><a href="https://github.com/pybites/blog_code/blob/master/BeautifulSoup/scrabble_distribution.py">Here</a> is another example how to scrape <a href="http://scrabblewizard.com/scrabble-tile-distribution/">scrabblewizard.com</a> to parse the html table that has the Scrabble tile distribution and load it into a data structure (list of named tuples).</p>
<p><a href="http://bobbelderbos.com/2016/12/code-kata/">Titans books kata</a> also used BeautifulSoup to scrape the page, see code <a href="https://github.com/pybites/blog_code/blob/master/BeautifulSoup/titans_books.py">here</a>.</p>
<h2>Areas for Expansion</h2>
<p>Again, this is web scraping at its simplest. There are heaps of improvements and additions that can be made with these coming to mind right away:</p>
<ul>
<li>Pull the URL for each header and output that alongside the title.</li>
<li>Automate the script to run (daily?) and store the output.</li>
<li>Have the output emailed to you along with links to each post.</li>
<li>Store the Request object in a local file so we don't have to keep making an HTML request every time we run the program.</li>
<li>Store post headings in an external file to allow us to only send notifications when there's a <em>new</em> post.</li>
</ul>
<h2>Conclusion</h2>
<p>This was a pretty satisfying project for me. Web scraping has endless possibilities - you just need to figure out what you want and from where!</p>
<p>This example is as simple as they come but hopefully now you can see just how easy it really is.</p>
<p>Oh and if anyone tries to say, "Isn't that what the RSS feed or Subscribe button is for?", ignore them. This is <em>way</em> more satisfying!</p>
<p>Keep Calm and Code in Python!</p>
<p>-- Julian</p>
  </div>

  <hr>
  <p><strong>See an error in this post? Please submit a pull request <a href='https://github.com/pybites/pybites.github.io-src' target='_blank'>on Github.</a></strong></p>

<!-- Begin MailChimp Signup Form -->
<hr class="softDivider">
<div id="mc_embed_signup">
<form action="//pybit.us14.list-manage.com/subscribe/post?u=822043293f280259d4b8d2a3e&amp;id=ac7e2eb9ef" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    
<div class="mc-field-group">
  <p><a href='http://us14.campaign-archive1.com/home/?u=822043293f280259d4b8d2a3e&id=ac7e2eb9ef'>Join our community</a> and grab our <i>Become a Better Python Developer</i> cheat sheet. Learn Python. Receive bonus material. Challenge yourself!</p>
    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
</div>
    <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_822043293f280259d4b8d2a3e_ac7e2eb9ef" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Join Us" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<!--End mc_embed_signup-->
  <div class="tag-cloud">
    <p>
      <a href="https://pybit.es/tag/python.html">python</a>
      <a href="https://pybit.es/tag/tips.html">tips</a>
      <a href="https://pybit.es/tag/tricks.html">tricks</a>
      <a href="https://pybit.es/tag/code.html">code</a>
      <a href="https://pybit.es/tag/pybites.html">pybites</a>
      <a href="https://pybit.es/tag/beautifulsoup.html">beautifulsoup</a>
      <a href="https://pybit.es/tag/bs4.html">bs4</a>
      <a href="https://pybit.es/tag/webscraping.html">webscraping</a>
      <a href="https://pybit.es/tag/namedtuples.html">namedtuples</a>
    </p>
  </div>

  <div class="center social-share">
    <p>    Like this article? Share it with your friends!
</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
  </div>



<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'http-pybit-es';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
</article>

    <footer>
<p>&copy; pybites </p>
<p>    Powered by <a href="https://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89294245-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

	<script>window.twttr = (function(d, s, id) {
	var js, fjs = d.getElementsByTagName(s)[0],
		t = window.twttr || {};
	if (d.getElementById(id)) return t;
	js = d.createElement(s);
	js.id = id;
	js.src = "https://platform.twitter.com/widgets.js";
	fjs.parentNode.insertBefore(js, fjs);
	t._e = [];
	t.ready = function(f) {
		t._e.push(f);
	};
	return t;
	}(document, "script", "twitter-wjs"));</script>

  <script async defer src="https://buttons.github.io/buttons.js"></script>
	
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5859c6a67eb6254d" async="async"></script>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " PyBites ",
  "url" : "https://pybit.es",
  "image": "https://pybit.es/theme/img/profile.png",
  "description": "Python Code Challenges, Articles and News - One Bite a Day"
}
</script>
</body>
</html>